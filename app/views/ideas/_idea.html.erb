
<div>
  <p><%= link_to(idea.user.name, idea.user) %>&nbsp&nbsp&nbsp&nbsp<%= "#{time_ago_in_words(idea.created)} ago"%>
  <p><b><%= link_to( idea.body, idea) %></b>
    <% if current_user===(idea.user) %> 
      <i><%= link_to "edit ", edit_idea_path(idea) %></i>
    <% end %></p> 
    <% num_votes(idea) %><%# set @idea_upvotes and @idea_downvotes %>
    <p>
      <%= @idea_upvotes %>
      <%= form_for(idea.votes.build) do |f| %>
        <%# put these in controller, not hidden_fields %>
        <%= f.hidden_field :upvote, value: 1 %> 
        <%= f.hidden_field :idea, value: idea %>
        <%= f.submit "up", class: "btn btn-large btn-primary" %>
      <% end %>



      <%#= button_to raw("<i class=\"text-color fa fa-chevron-up fa-1x\"></i>"), %>
      &nbsp&nbsp | &nbsp&nbsp
      <%=@idea_downvotes %>
      <%= form_for(idea.votes.build(upvote: 0, downvote: 1, created: Time.now, idea: idea, user: current_user), remote: true) do |f| %>
        <%= f.submit "down", class: "btn btn-large btn-primary" %>
      <% end %>

      <a href <i class="text-color fa fa-chevron-down fa-1x"></i> </a> &nbsp&nbsp
      <%= link_to "Reply", '#' %>
      <%# make this appear when Reply is clicked %>
      <%= form_for(@idea) do |f| %>
          <%#= render 'shared/error_messages', object: f.object %>
        <%= f.text_field :body %>
        <%= f.hidden_field :thread, :value =>idea %><%# might be a string rather than the object %>
        <br>
        <%= f.submit "Submit", class: "btn" %>
      <% end %>



      <div ng-controller="VoteCtrl">
        <div class="vote" ng-repeat="vote in votes">
          <a href="#" ng-click="like(vote)">{{vote.title}}</a> {{vote.like}}
        </div>
      </div>

    </p>
</div>

<hr> 
<!-- <ul>
    <%# sub_idea = Idea.find(params[:id]) # WRONG can't user params%>
    <%# sub_idea = idea.replies %>
    <%# puts "sub_idea.body: #{sub_idea.body}" %>
    <%# sub_comments = sub_idea.replies%>
    <%# puts "sub_comments.count: #{sub_comments.count}" %>
    <%# puts "sub_comments.nil?: #{sub_comments.nil?} " %>
    <%# unless sub_comments.nil? %>
      <%# sub_comments.each do |comment| %>
        <%#= render comment %>  <%# magically knows to go to _idea %>
      <%# end %>
    <%# end %>
</ul> -->